<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<!-- Your interface name here  MY CHANGE HERE-->
	<title></title>
	<!-- The description of this interfaces here -->
	<meta name="description" content="">
	<!-- Your CSS here -->
</head>
<body>



				<!-- FIG THIS !!!!!!  -->
	<script src="Chart.min.js"></script>
	<!-- Scripts -->
	<script src="nutella_lib.js" type="text/javascript"></script>
	<!-- Your scripts here -->

	<script type="text/javascript">

	// Parse the query parameters
	var query_parameters = NUTELLA.parseURLParameters();

	// Get an instance of nutella.
	var nutella = NUTELLA.init(query_parameters.broker, query_parameters.app_id, query_parameters.run_id, NUTELLA.parseComponentId());









	</script>
			<!-- Your markup here -->

	Habitat: <input type=text id="habitat">	<br>
	Species: <input type=text id="species">	<br>
	Points: <input type=text id="points">	<br>
	From: <input type=text id="from">	<br>
	To: <input type=text id="to">	<br>

<!-- // channel: environment_history
//
//          message = {
//                      environmental_variable: 0,
//                      habitat: '2',
//                      from: '100',  // seconds since 1970
//                      to: '200'
//                    }
 -->


<!-- 	<input type=button name='increase' value='increase' onClick="nutella.net.publish('species_event', {habitat: document.getElementById('habitat').value, species:document.getElementById('environmental_variable').value, action: 'increase'});">

	<input type=button name='decrease' value='decrease' onClick="nutella.net.publish('species_event', {habitat: document.getElementById('habitat').value, species: document.getElementById('environmental_variable').value, action: 'decrease'});">

	<input type=button name='colonize' value='colonize' onClick="nutella.net.publish('species_event', {habitat: document.getElementById('habitat').value, species: document.getElementById('environmental_variable').value, action: 'colonize'});">
 -->

	<input type=button name='history' value='history' onClick="
	nutella.net.request('population_history', {habitat: document.getElementById('habitat').value, species: document.getElementById('species').value, points: document.getElementById('points').value, from: document.getElementById('from').value, to: document.getElementById('to').value}, function(response) {
		var r = response;
		var s = '';
		for (var i=0; i<r.length; i++) {
			s = s + r[i].timestamp + '   ' + r[i].population + '\n'; // + r[i].timestamp + '   ' + 
		}
		document.getElementById('result').value=s;
		var data = {
	    	labels: [],
	    	datasets: [
		        {
		            label: 'My First dataset',
		            fillColor: 'rgba(220,220,220,0.2)',
		            strokeColor: 'rgba(220,220,220,1)',
		            pointColor: 'rgba(120,220,20,1)',
		            pointStrokeColor: '#fff',
		            pointHighlightFill: '#fff',
		            pointHighlightStroke: 'rgba(220,220,220,1)',
		            data: []
		        }
	    	]
		};
		console.log(r.length);
		for (var i=0; i<r.length; i++) { 
			data.labels[i] = ''; if (i % 360 == 0) data.labels[i] = 'â€¢';
			data.datasets[0].data[i]=r[i].population;
		}
		var ctx = document.getElementById('myChart').getContext('2d');
		var myLineChart = new Chart(ctx).Line(data);
	});"><br>





	<input type=button name='warming' value='warming' onClick="

	nutella.net.publish('environmental_event', {habitat: document.getElementById('habitat').value, species: document.getElementById('species').value, action: 'warming'});">

	<input type=button name='pipeCollapse' value='pipeCollapse' onClick="

	nutella.net.publish('environmental_event', {habitat: document.getElementById('habitat').value, species: document.getElementById('species').value, action: 'pipeCollapse'});">

	<input type=button name='invasion' value='invasion' onClick="

	nutella.net.publish('environmental_event', {habitat: document.getElementById('habitat').value, species: document.getElementById('species').value, action: 'invasion'});"><br>



	<textarea id="result" rows="20" cols="40"></textarea>

	<canvas id="myChart" width="800" height="300"></canvas>

</body>
</html>
