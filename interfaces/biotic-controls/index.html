<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<!-- Your interface name here-->
	<title>Biotic Controls</title>
	<!-- The description of this interfaces here -->
	<meta name="description" content="Biotic Controls">
	<!-- Your CSS here -->
</head>
<body>


		<!-- Scripts -->
	<script src="nutella_lib.js" type="text/javascript"></script>
	<script> 

		window.document.write('<link rel="stylesheet" type="text/css" href="mystyle.css">'); 
		// Parse the query parameters
		var query_parameters = NUTELLA.parseURLParameters();
		var ecosystem = query_parameters.INSTANCE;
		if (ecosystem === undefined) ecosystem = 0;
		document.write('<H4>Biotic Controls for Ecosystem ' + (Number(ecosystem) +1) + '</H4>');

		var veg_selection = -1;
		var animal_selection = -1;
	</script>

<!-- Your markup here -->

	<!-- The above is very temporary. We need to get ecosystem from URL PARAMETERS -->
	<!-- Species: <input type=text id="species" size=2><br> -->


	<div style="color:DarkCyan; font-size: 120%"> Vegetation Controls</div> <br>
	<table class="center">
	<tr><td align=center colspan=2>

		<img src='https://ltg.cs.uic.edu/WC/icons/species_04.png' class='opClass' onClick="toggle('veg',4)" height=100 width=100 id='img4'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_05.png' onClick="toggle('veg',5)" height=100 width=100 id='img5'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_09.png' onClick="toggle('veg',9)" height=100 width=100 id='img9'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_10.png' onClick="toggle('veg',10)" height=100 width=100 id='img10'>
	</td></tr>
		<tr><td align=right><button type="button" onclick="seed();" id="seed">Apply seed</button></td><td align=left><button type="button" onclick="herbicide();" id="herbicide">Apply herbicide</button></td></tr>

	</table><br><br>

	<div style="color:DarkCyan; font-size: 120%"> Animal Controls</div> <br>
	<table class="center">
	<tr><td align=center colspan=2>

		<img src='https://ltg.cs.uic.edu/WC/icons/species_00.png' onClick="toggle('animal',0)" height=100 width=100 id='img0'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_01.png' onClick="toggle('animal',1)" height=100 width=100 id='img1'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_02.png' onClick="toggle('animal',2)" height=100 width=100 id='img2'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_03.png' onClick="toggle('animal',3)" height=100 width=100 id='img3'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_06.png' onClick="toggle('animal',6)" height=100 width=100 id='img6'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_07.png' onClick="toggle('animal',7)" height=100 width=100 id='img7'>
		<img src='https://ltg.cs.uic.edu/WC/icons/species_08.png' onClick="toggle('animal',8)" height=100 width=100 id='img8'>
	</td></tr>
	<tr><td align=right><button type="button" onclick="colonize();" id="colonize">Insert colonizer</button></td><td align=left><button type="trap" onclick="trap();" id="herbicide">Insert trap</button></td></tr>

	</table><br>



	
<!-- 	Population controls: <br><br>
	<button type="button" onclick="seed(document.getElementById('species').value);" id="seed">Seed</button><br>
	<button type="button" onclick="herbicide(document.getElementById('species').value);" id="herbicide">Herbicide</button><br>
	<button type="button" onclick="colonize(document.getElementById('species').value);" id="colonize">Colonize</button><br>
	<button type="button" onclick="trap(document.getElementById('species').value);" id="trap">Trap</button><br>
 -->
				
	<script type="text/javascript">

			var nutella = NUTELLA.init(query_parameters.broker, query_parameters.app_id, query_parameters.run_id, NUTELLA.parseComponentId());
	
		var DELAY=60 * 1000; //one minute between actions
	// (Optional) Set the resourceId

var s = -1;
	
	function toggle(speciesType,index){ 
		// for (var i=0; i<10; i++) {
		// 	document.getElementById('img' + i).enabled=false;
		// } 
		// document.getElementById('img' + index).enabled=true; 
		s=index;
				// document.getElementById('img' + index).setAttribute('enabled', 'enabled');
	}

	// Get an instance of nutella. 
	// nutella.setResourceId('my_resource_id');


	function seed () {
		nutella.net.publish('seed',{ecosystem:ecosystem,species:s});
		block();
	}

	function herbicide () {
		nutella.net.publish('herbicide',{ecosystem:ecosystem,species:s});
		block();
	}
	function colonize () {
		nutella.net.publish('colonize',{ecosystem:ecosystem,species:s});
		block();
	}
	function trap () {
		nutella.net.publish('trap',{ecosystem:ecosystem,species:s});
		block();
	}

	function block () {
		document.getElementById('seed').disabled = true;
		document.getElementById('herbicide').disabled = true;
		document.getElementById('colonize').disabled = true;
		document.getElementById('trap').disabled = true;
		setTimeout(unblock, DELAY);

	}

	function unblock () {
		document.getElementById('seed').disabled = false;
		document.getElementById('herbicide').disabled = false;
		document.getElementById('colonize').disabled = false;
		document.getElementById('trap').disabled = false;

	}

	// Your code that uses the nutella instance here
	
	
	// EXAMPLES
	// You can do stuff like:
	
	// // 1. Subscribing to a channel
	// nutella.net.subscribe('demo_channel', function(message, from_component_id, from_resource_id) {
	// 	// Your code to handle messages received on this here
	// });
	
	// // 2. Subscribe to a wildcard channel (a.k.a. more than one channel at the same time,
	// // in the example below we'll receive messages on demo_channel/a, demo_channel/a/b, demo_channel/c, etc.)
	// nutella.net.subscribe('demo_channel/#', function(message, channel, from_component_id, from_resource_id) {
	// 	// Your code to handle messages received by this channel here
	// });
	
	// // 3. Publish a message to a channel
	// nutella.net.publish('demo_channel', 'demo_message');
	
	// // 3a The cool thing is that the message can be any Javascript variable or object
	// nutella.net.publish('demo_channel', {a: 'proper', key: 'value'});
	
	// // 4. Make requests on a certain channel...
	// nutella.net.request('demo_channel', 'my_request', function(response) {
	// 	// Your code to handle the response here
	// });
	
	// // 4a ... and, guess what, we can send anything in a request, like in publish!
	// // Requests can even be empty, kind of like a GET
	// nutella.net.request('demo_channel', function(response) {
	// 	// Your code to handle the response here
	// });
	
	// // 5. Handle requests from other components
	// nutella.net.handle_requests('my_channel', function(request, component_id, resource_id) {
	// 	/// Your code to handle each request here
	// 	// Anything this function returns (string, integer, object,...) is going to be sent as the response
	// 	var response = 'this is my response';
	// 	// Or...
	// 	// var response = {};
	// 	// var response = 12345;
	// 	// var response = {a: 'proper', key: 'value'};
	// 	return response;
	// });
	
	// // 6. Access the variables that uniquely identify this instance of this component
	// nutella.runId;
	// nutella.componentId;
	// nutella.resourceId;
	
	// // 7. Do you need an extra instance of nutella (to work with React components for instance)? Not a problem...
	// // var nutella2 = NUTELLA.init(query_parameters.run_id, query_parameters.broker, 'your_interface_name');
	
	// // HAVE FUN WITH nutella!
	
	</script>
				
</body>
</html>