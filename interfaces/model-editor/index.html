
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<!-- Your interface name here  MY CHANGE HERE-->
	<title>WallCologyModel Editor</title>
	<!-- The description of this interfaces here -->
	<meta name="description" content="">
	<!-- Your CSS here -->
</head>

<body>


	<!-- Scripts -->
	<script src="nutella_lib.js" type="text/javascript"></script>
	<!-- Your scripts here -->

	<script type="text/javascript">


	// Parse the query parameters
	var query_parameters = NUTELLA.parseURLParameters();

	// Get an instance of nutella.
	var nutella = NUTELLA.init(query_parameters.broker, query_parameters.app_id, query_parameters.run_id, NUTELLA.parseComponentId());

	</script>

Ecosystem: 

<input type="radio" name="ecosystem" id="e0" value="0"> Pipe collapse
<input type="radio" name="ecosystem" id="e1" value="1"> Resource invasion
<input type="radio" name="ecosystem" id="e2" value="2"> Predator invasion
<input type="radio" name="ecosystem" id="e3" value="3"> Some like it hot<br>


<script>
	
	var model;

	nutella.net.request('read_model', {}, function(message) {
			model=message;
			console.log(Number(model['K'][0][0]));			
			drawModel();
			// nutella.net.publish('write_model',model);
		});



function getModel(){};


function selectedEcosystem() {
	return (document.getElementById('ecosystem').selected.value);
}

function onChangeModel() {saveModel();}

function saveModel() {}


function drawButtons() {
	document.write('<input type=button id="revert" value="revert" onClick="model=getModel();") Revert </input><input type=button id="save" value="save" onClick="save();") Save </input>');
}


function drawModel() {
	drawHeader();
	drawRow("r"); drawBlankRow();
	// drawRow("K"); drawBlankRow();
	// drawMatrix("alpha"); drawBlankRow();
	// drawRow("b"); drawBlankRow();
	// drawMatrix("a"); drawBlankRow();
	// drawRow("q"); drawBlankRow();
	// drawRow("d"); drawBlankRow();
	// drawRow("beta"); drawBlankRow();
	// drawRow("S"); drawBlankRow();
	// drawRow("delta"); drawBlankRow();
	// drawMatrix("m"); drawBlankRow();
	drawFooter();
}

function drawFooter() { document.write("</TABLE>");}

function drawHeader() {

	document.write("<TABLE border>");
}

function drawRow (parameter) {  // parameter = 0,1,2,3. it's the model parameter to be displayed.
	document.write('<tr><td>' + parameter + '</td><td>                 </td>');
	for (col=0;col<4;col++) document.write ('<td> <input type="text" id="' + parameter + '.' + col + '" size=6 value="' + model[selectedEcosystem()][parameter][col] + '"></td>');
	document.write('</tr>');
}

function drawBlankRow() {
	document.write('<tr><td>&nbsp</td></tr>');
}

function drawMatrix (parameter) {  // parameter = 0,1,2,3. it's the model parameter to be displayed.
	for (var row=0; row<4; row++) {
		document.write('<tr><td>' + parameter + '</td><td>                 </td>');
		for (col=0;col<4;col++) document.write ('<td> <input type="text" id="p.' + parameter + '.' + row + '.' + col + '" size=6 value="' + model[selectedEcosystem()][parameter][row][col] + '"></td>');
		document.write('</tr>');
	}
}

function test() {
		nutella.net.request('read_model', {}, function(response) {
			model=response;
			nutella.net.publish('write_model',model);
		});
	}





//const resourceIndex = [ [4,10,9], 
//                        [4,5], 
//                        [10,5], 
//                        [4,10,5] 
//                      ] ; // which indexes in the species array correspond to resources
//
//const herbivoreIndex =  [   [6,2], 
//                            [6,7,0], 
 //                           [6,2], 
//                            [7,0] 
//                        ]; // etc. ORDER MATTERS in all 3, because constants above are based on them
//
//const predatorIndex = [ [1,8], 
//                        [8], 
//                        [1,3], 
//                        [8] 
//                      ]; // ditto
</script>



</body>
</HTML>