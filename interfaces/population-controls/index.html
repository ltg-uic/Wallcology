<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<!-- Your interface name here-->
	<title></title>
	<!-- The description of this interfaces here -->
	<meta name="description" content="">
	<!-- Your CSS here -->
</head>
<body><div align=center>
	
	<!-- species selector -->

	
	Habitat: <input id="habitatSelector" type=button value="  " onClick="this.value = this.value==N_habitats? 1 : Number(this.value) + 1;">
	

	<script type="text/javascript">

		function highlight(obj,s) {
			obj.forEach(function(value) {
				if (value == s) {
					document.getElementById(value).style.opacity=1.0;
				} else {
					document.getElementById(value).style.opacity=0.4;
				}
			})
		}

	<!-- species selector -->


	var species = ['blueHerbivore','orangePredator','greenResource','purpleHerbivore','redPredator','tanResource','tealResource','greenHerbivore','purpleResource','yellowPredator','brownHerbivore'];
	var selected_species;
	species.forEach(function(value){
		document.write('<input id="' + value + '" height="60" width="60" type="image" src="' + value + '.png" ');
		document.writeln('onclick="selected_species = \'' + value + '\'; highlight(species,selected_species)">');
		});
	highlight(species, selected_species);
	document.write("<br><br>");

	<!-- manipulation selector -->

	var manipulations = ['increase','decrease','colonize','kill'];
	var selected_manipulation;
	manipulations.forEach(function(value){
		document.write('<input id="' + value + '" height="300" width="300" type="image" src="' + value + '.png" ');
		document.writeln('onclick="selected_manipulation = \'' + value + '\'; highlight(manipulations,selected_manipulation)">');
		if (value == 'decrease') document.write("<br><br>"); //temporary hack to make two columns
		});
	highlight(manipulations,selected_manipulation);
	document.write("<br><br>");

	function broadcast_population_update () {
		var w = document.getElementById('habitatSelector').value;
		if (w == "  ") alert("Please select a habitat.");
		else if (!selected_species) alert("Please select a species.");
		else if (!selected_manipulation) alert("Please select a manipulation.");
		else if (confirm("Are sure you want to " + selected_manipulation + " the population of " + selected_species + "s in habitat " + w + "?")) nutella.net.publish('population-update', {habitat: document.getElementById('habitatSelector').value, species: selected_species, action: selected_manipulation});
	}


	</script>


	<input type=button value="Change population levels" onClick="broadcast_population_update();">
	

	<!-- Scripts -->
	<script src="nutella_lib.js" type="text/javascript"></script>
	<!-- Your scripts here -->
				
	<script type="text/javascript">
	
	var N_habitats = 4;

	// Parse the query parameters
	var query_parameters = NUTELLA.parseURLParameters();

	// Get an instance of nutella. 
	var nutella = NUTELLA.init(query_parameters.broker, query_parameters.app_id, query_parameters.run_id, NUTELLA.parseComponentId());
	

	
	</script>
		</div>		
</body>
</html>